(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{23:function(t,s,e){var o=e(72);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e(12)(o,i);o.locals&&(t.exports=o.locals)},47:function(t,s,e){"use strict";e.r(s);var o=e(13);var i={mixins:[o.ContainerMixin],template:"<div><slot /></div>"},a={mixins:[o.ElementMixin],props:["item"],template:'<div class="row slot-project"><slot /></div>'},r={middleware:"auth",components:{ContainerMixin:o.ContainerMixin,ElementMixin:o.ElementMixin,SortableItem:a,SortableList:i},data:function(){return{loaded:!1,projects:Array,items:Array}},mounted:function(){var t=this;axios.all([axios.get("/api/fetch/projects")]).then(axios.spread((function(s){t.loaded=!0,t.projects=s.data.data,t.prepareDrag()})))},methods:{prepareDrag:function(){this.items=Object.values(this.projects)},toggleFocus:function(t,s){var e=this,o=function(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}({},"id",s);axios.post(["/api/update/project/focus"],o,this.headers).then((function(s){1==e.items[t].focus?e.items[t].focus=0:e.items[t].focus=1})).catch((function(t){422===t.response.status&&(e.errors=t.response.data.errors||{},$.each(e.errors,(function(t,s){})))}))},saveOrder:function(){var t=[];this.items.forEach((function(s){var e=[{id:s.id}];t.push(e)})),axios.post(["/api/order/projects"],t).then((function(t){})).catch((function(t){}))}}},n=(e(71),e(1)),c=Object(n.a)(r,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"row header"},[e("div",{staticClass:"col-12 col-sm-8"},[e("h3",{staticClass:"mb-4"},[t._v(t._s(t.$t("projects")))])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-4 text-right"},[e("router-link",{attrs:{to:{name:"project.add"}}},[e("img",{attrs:{src:"/img/ico-add.svg"}})])],1)]),t._v(" "),t.loaded?e("div",[e("card",{attrs:{id:"dashboard"}},[e("SortableList",{attrs:{lockAxis:"y",distance:10},on:{input:function(s){return t.saveOrder()}},model:{value:t.items,callback:function(s){t.items=s},expression:"items"}},t._l(t.items,(function(s,o){return e("SortableItem",{key:parseInt(o),attrs:{index:parseInt(o),value:s}},[e("div",{staticClass:"col-11 col-sm-6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-1 col-2 text-right"},[0==s.focus?e("BIconStar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("mark_as_focus")},on:{click:function(e){return t.toggleFocus(o,s.id)}}}):e("BIconStarFill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("unmark_as_focus")},on:{click:function(e){return t.toggleFocus(o,s.id)}}})],1),t._v(" "),e("div",{staticClass:"col-sm-11 col-10"},[e("span",{staticClass:"project-name"},[e("router-link",{attrs:{to:{name:"project.home",params:{id:s.id}}}},[t._v("\n                    "+t._s(s.name)+"\n                  ")])],1),t._v(" "),e("span",{staticClass:"client-name"},[t._v(t._s(s.client))])])])]),t._v(" "),e("div",{staticClass:"col-1 col-sm-1"},[e("router-link",{attrs:{to:{name:"project.tasks",params:{id:s.id}}}},[e("h2",[e("BIconListTask",{attrs:{variant:"secondary"}})],1)])],1),t._v(" "),e("div",{staticClass:"col-4 col-sm-1 text-left text-sm-right"},[t._v("\n            "+t._s(s.hours_estimated)),e("br"),t._v("\n            "+t._s(s.hours)+"\n          ")]),t._v(" "),"free"!=s.type?e("div",{staticClass:"col-4 col-sm-2 text-center text-sm-right"},[t._v("\n            "+t._s(s.desired_price_hour)),e("br"),t._v("\n            "+t._s(s.price_hour)+"\n          ")]):t._e(),t._v(" "),"free"!=s.type?e("div",{staticClass:"col-4 col-sm-2 text-right"},[t._v("\n            "+t._s(s.total)),e("br"),t._v("\n            "+t._s(s.balance)+"\n          ")]):t._e(),t._v(" "),"free"==s.type?e("div",{staticClass:"col-4 text-center"},[e("p",[t._v("Free project")])]):t._e()])})),1)],1)],1):e("div",[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])])}),[],!1,null,null,null);s.default=c.exports},71:function(t,s,e){"use strict";var o=e(23);e.n(o).a},72:function(t,s,e){(t.exports=e(11)(!1)).push([t.i,"#dashboard .slot-project {\n  margin-bottom: 1em;\n  border-bottom: 1px solid #f0f0f0;\n  padding-bottom: 1em;\n}\n#dashboard .slot-project .project-name {\n  font-weight: bold;\n  display: block;\n}\n#dashboard .slot-project .client-name {\n  font-style: italic;\n  display: block;\n}\n#dashboard .pointer {\n  cursor: pointer;\n}\n#dashboard .slot-project:last-child {\n  border: none;\n  margin-bottom: 0;\n}\n#dashboard .archive-icon {\n  opacity: 0;\n}\n#dashboard .archive-icon:hover {\n  opacity: 1;\n}",""])}}]);
