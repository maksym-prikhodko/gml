(window.webpackJsonp=window.webpackJsonp||[]).push([[3,4,6,10,24],{20:function(t,e,i){"use strict";i.r(e);var s={middleware:"auth",props:["file"],data:function(){return{item:[],sureDelete:!1,deleted:!1,counter:0}},mounted:function(){this.item=this.$props.file},methods:{isImage:function(){return!1},getIcon:function(){return"image/jpeg"==this.item.mime_type?"file-image":"application/pdf"==this.item.mime_type?"file-pdf":"file"},sureYouWannaDelete:function(){var t=this;this.sureDelete=!0,this.counter=2,setTimeout((function(){return t.counter=1}),1e3),setTimeout((function(){return t.sureDelete=!1}),2e3)},deleteFile:function(){var t=this,e=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"id",this.item.id);axios.post("/api/upload/file/delete",e).then((function(e){t.deleted=!0,t.sureDelete=!1,t.counter=0})).catch((function(e){t.deleted=!1,t.errors=e.response.data.errors||{},$.each(t.errors,(function(t,e){}))}))}}},a=(i(75),i(1)),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.deleted?t._e():i("div",{staticClass:"slot-preview-file"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-9"},[i("a",{attrs:{href:"/api/upload/file/get/"+t.item.pivot.mediable_id+"/"+t.item.id,target:"_blank"}},[t.isImage()?i("span",[i("img",{staticClass:"img-responsive img-preview mb-2",attrs:{src:"/api/upload/file/show/"+t.item.pivot.mediable_id+"/"+t.item.id}})]):i("span",[t._v("\n          "+t._s(t.item.filename)+"."+t._s(t.item.extension)+"\n        ")])])]),t._v(" "),i("div",{staticClass:"col-3 text-right"},[t.sureDelete?t._e():i("span",{staticClass:"text-gray-200 pointer",on:{click:function(e){return t.sureYouWannaDelete()}}},[i("BIconTrash")],1),t._v(" "),t.sureDelete?i("button",{staticClass:"btn btn-sm bg-danger text-white",on:{click:function(e){return t.deleteFile()}}},[i("BIconTrash"),t._v("?\n        "+t._s(this.counter)+"\n      ")],1):t._e()])])])}),[],!1,null,null,null);e.default=o.exports},21:function(t,e,i){"use strict";i.r(e);var s={props:["model","id"],data:function(){return{fileRecords:[],uploadUrl:"/api/upload/files/"+this.$props.id,uploadHeaders:{"X-Test-Header":"vue-file-agent"},fileRecordsForUpload:[]}},methods:{uploadFiles:function(){this.$refs.vueFileAgent.upload(this.uploadUrl,this.uploadHeaders,this.fileRecordsForUpload),this.fileRecordsForUpload=[]},deleteUploadedFile:function(t){this.$refs.vueFileAgent.deleteUpload(this.uploadUrl,this.uploadHeaders,t)},filesSelected:function(t){var e=t.filter((function(t){return!t.error}));this.fileRecordsForUpload=this.fileRecordsForUpload.concat(e)},onBeforeDelete:function(t){var e=this.fileRecordsForUpload.indexOf(t);-1!==e?this.fileRecordsForUpload.splice(e,1):confirm("Are you sure you want to delete?")&&this.$refs.vueFileAgent.deleteFileRecord(t)},fileDeleted:function(t){var e=this.fileRecordsForUpload.indexOf(t);-1!==e?this.fileRecordsForUpload.splice(e,1):this.deleteUploadedFile(t)}}},a=i(1),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VueFileAgent",{ref:"vueFileAgent",attrs:{theme:"list",multiple:!0,deletable:!1,meta:!0,auto:!0,maxSize:"10MB",maxFiles:14,helpText:t.$t("choose_files"),errorText:{type:"Invalid file type. Only images or zip Allowed",size:"Files should not exceed 10MB in size"}},on:{select:function(e){return t.filesSelected(e)},beforedelete:function(e){return t.onBeforeDelete(e)},delete:function(e){return t.fileDeleted(e)}},model:{value:t.fileRecords,callback:function(e){t.fileRecords=e},expression:"fileRecords"}}),t._v(" "),i("button",{attrs:{disabled:!t.fileRecordsForUpload.length},on:{click:function(e){return t.uploadFiles()}}},[t._v("\n       "+t._s(t.$t("upload"))+"  "+t._s(t.fileRecordsForUpload.length)+" "+t._s(t.$t("files"))+"\n    ")])],1)}),[],!1,null,null,null);e.default=o.exports},22:function(t,e,i){"use strict";i.r(e);var s=i(62),a=i(21),o=i(20),r={middleware:"auth",components:{VueEditor:s.a,Uploader:a.default,TaskFileSlot:o.default},props:["id"],data:function(){return{loaded:!1,loadId:null,item:Array,customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]}},mounted:function(){this.loadId=this.$props.id;var t=this;axios.all([axios.get("/api/tasks/"+t.id)]).then(axios.spread((function(e){t.loaded=!0,t.item=e.data.data})))},methods:{updateTask:function(){var t=this;axios.patch(["/api/tasks/"+this.item.id],this.item).then((function(t){})).catch((function(e){422===e.response.status&&(t.errors=e.response.data.errors||{},$.each(t.errors,(function(t,e){})))}))}}},n=i(1),l=Object(n.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loaded?i("div",{staticClass:"p-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-9"},[i("b-form-input",{staticClass:"inline-input mb-3 text-lg",attrs:{size:"lg",required:""},on:{change:function(e){return t.updateTask()}},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1),t._v(" "),i("div",{staticClass:"col-12 col-md-3"})]),t._v(" "),i("div",{staticClass:"row mb-4"},[i("div",{staticClass:"col-12"},[i("vue-editor",{staticClass:"inline-input",attrs:{id:"editor",editorToolbar:t.customToolbar},on:{blur:function(e){return t.updateTask()}},model:{value:t.item.desc,callback:function(e){t.$set(t.item,"desc",e)},expression:"item.desc"}})],1)]),t._v(" "),t._l(t.item.uploads,(function(t,e){return i("div",{key:parseInt(e),staticClass:"mb-3",attrs:{index:parseInt(e),value:t}},[i("TaskFileSlot",{attrs:{file:t}})],1)})),t._v(" "),i("div",{staticClass:"row mb-4"},[i("div",{staticClass:"col-12"},[i("Uploader",{attrs:{model:"task",id:t.item.id}})],1)])],2):i("div",[i("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])])}),[],!1,null,null,null);e.default=l.exports},23:function(t,e,i){"use strict";i.r(e);var s=i(6),a=i(22);function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={mixins:[s.ContainerMixin],template:"<div><slot /></div>"},n={mixins:[s.ElementMixin],props:["item"],template:'<div class="row slot-task"><slot /></div>'},l={middleware:"auth",props:["id"],components:{ContainerMixin:s.ContainerMixin,ElementMixin:s.ElementMixin,SortableItem:n,SortableList:r,Task:a.default},data:function(){return{loaded:!1,project:Array,tasks:Array,items:Array,newTaskOpen:!1,form:{name:"",project_id:null}}},mounted:function(){var t=this;this.$root.$on("bv::modal::hide",(function(e,i){t.loadTasks()})),this.id=this.$props.id,this.loadTasks()},methods:{loadTasks:function(){var t=this;axios.all([axios.get("/api/projects/"+t.id),axios.post(["/api/fetch/projects/tasks"],{projectId:t.id})]).then(axios.spread((function(e,i){t.loaded=!0,t.project=e.data.data,t.tasks=i.data.data,t.form.project_id=e.data.data.id,t.prepareDrag()})))},prepareDrag:function(){this.items=Object.values(this.tasks),0==this.items.length&&(this.newTaskOpen=!0)},toggleFocus:function(t,e){var i=this,s=o({},"id",e);axios.post(["/api/update/task/focus"],s,this.headers).then((function(e){1==i.items[t].focus?i.items[t].focus=0:i.items[t].focus=1})).catch((function(t){422===t.response.status&&(i.errors=t.response.data.errors||{},$.each(i.errors,(function(t,e){})))}))},toggleCompleted:function(t,e){var i=this,s=o({},"id",e);axios.post(["/api/update/task/completed"],s,this.headers).then((function(e){1==i.items[t].completed?i.items[t].completed=0:i.items[t].completed=1})).catch((function(t){422===t.response.status&&(i.errors=t.response.data.errors||{},$.each(i.errors,(function(t,e){})))}))},toggleNewTask:function(){this.newTaskOpen=!this.newTaskOpen},saveOrder:function(){var t=[];this.items.forEach((function(e){var i=[{id:e.id}];t.push(i)})),axios.post(["/api/order/tasks"],t).then((function(t){})).catch((function(t){}))},onSubmit:function(t){var e=this;t.preventDefault();var i={id:0,name:this.form.name,desc:null,focus:0,completed:0};this.items.unshift(i),axios.post(["/api/tasks"],this.form).then((function(t){e.form.name=null,e.loadTasks()})).catch((function(t){422===t.response.status&&(e.errors=t.response.data.errors||{},$.each(e.errors,(function(t,e){})))}))}}},c=(i(79),i(1)),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loaded?i("div",[i("div",{staticClass:"row header"},[i("div",{staticClass:"col-10 col-sm-8"},[i("h3",{staticClass:"mb-4"},[t._v(t._s(t.$t("tasks")))])]),t._v(" "),i("div",{staticClass:"col-2 col-sm-4 text-right"},[t.newTaskOpen?i("h2",[i("BIconXCircle",{attrs:{variant:"secondary"},on:{click:function(e){return t.toggleNewTask()}}})],1):i("h2",[i("BIconPlusCircleFill",{attrs:{variant:"secondary"},on:{click:function(e){return t.toggleNewTask()}}})],1)])]),t._v(" "),i("div",{staticClass:"row new-task",class:{newTaskOpened:t.newTaskOpen}},[i("div",{staticClass:"col-12"},[i("span",{staticClass:"task-name"},[i("b-form",{on:{submit:t.onSubmit}},[i("b-input-group",[i("b-form-input",{attrs:{required:"",placeholder:t.$t("task_title_here")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),i("b-input-group-append",[i("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("create")))])],1)],1)],1)],1)])]),t._v(" "),i("card",{attrs:{id:"tasks"}},[0==t.items.length?i("div",{staticClass:"text-center mt-5 mb-5"},[i("h1",[i("BIconFolder")],1),t._v(" "),i("p",[t._v(t._s(t.$t("add_your_first_task")))])]):t._e(),t._v(" "),i("SortableList",{attrs:{lockAxis:"y",distance:10},on:{input:function(e){return t.saveOrder()}},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,(function(e,s){return i("SortableItem",{key:parseInt(s),class:{completed:e.completed},attrs:{index:parseInt(s),value:e}},[i("div",{staticClass:"col-2 col-sm-1 text-center"},[0==e.completed?i("BIconCircle",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("mark_as_focus")},on:{click:function(i){return t.toggleCompleted(s,e.id)}}}):i("BIconCheckCircle",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("unmark_as_focus")},on:{click:function(i){return t.toggleCompleted(s,e.id)}}})],1),t._v(" "),i("div",{staticClass:"col-8 col-sm-10"},[i("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal"+e.id,expression:"'modal'+item.id"}],staticClass:"task-name"},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),i("b-modal",{attrs:{id:"modal"+e.id,size:"xl",centered:"","header-class":"d-none","footer-class":"d-none"}},[i("Task",{attrs:{id:e.id}})],1)],1),t._v(" "),i("div",{staticClass:"col-2 col-sm-1 text-left text-sm-right"},[0==e.focus?i("BIconStar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("mark_as_focus")},on:{click:function(i){return t.toggleFocus(s,e.id)}}}):i("BIconStarFill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pointer pull-right",attrs:{title:t.$t("unmark_as_focus")},on:{click:function(i){return t.toggleFocus(s,e.id)}}})],1)])})),1)],1)],1):i("div",[i("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])])}),[],!1,null,null,null);e.default=d.exports},26:function(t,e,i){var s=i(76);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(9)(s,a);s.locals&&(t.exports=s.locals)},28:function(t,e,i){var s=i(80);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(9)(s,a);s.locals&&(t.exports=s.locals)},31:function(t,e,i){var s=i(90);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(9)(s,a);s.locals&&(t.exports=s.locals)},47:function(t,e,i){"use strict";i.r(e);var s={middleware:"auth",components:{ProjectTasks:i(23).default},data:function(){return{loaded:!1,title:"...",id:null,project:Array}},mounted:function(){this.id=this.$route.params.id;var t=this;axios.all([axios.get("/api/projects/"+t.id)]).then(axios.spread((function(e){t.loaded=!0,t.project=e.data.data,t.title=e.data.data.name})))},methods:{toggleArchive:function(){var t=this,e=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"id",this.project.id);axios.post(["/api/update/project/archive"],e).then((function(e){1==t.project.archived?t.project.archived=0:t.project.archived=1})).catch((function(e){422===e.response.status&&(t.errors=e.response.data.errors||{},$.each(t.errors,(function(t,e){})))}))}}},a=(i(89),i(1)),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loaded?i("div",[i("div",{staticClass:"row header"},[i("div",{staticClass:"col-8 col-sm-8"},[i("h3",{staticClass:"mb-4"},[t._v("\n          \n          "+t._s(t.$t("project"))+" / "+t._s(t.title)+"\n\n          "),i("router-link",{staticClass:"ml-3",attrs:{to:{name:"project.edit",params:{id:t.project.id}}}},[i("BIconPencilSquare",{attrs:{variant:"secondary"}})],1)],1)]),t._v(" "),i("div",{staticClass:"col-4 col-sm-4 text-right menu-upright"},[i("router-link",{attrs:{to:{name:"projects"}}},[i("h2",[i("BIconClockFill",{attrs:{variant:"secondary"}})],1)]),t._v(" "),i("router-link",{attrs:{to:{name:"projects"}}},[i("h2",[i("img",{attrs:{src:"/img/ico-money-rise.svg"}})])])],1)]),t._v(" "),"free"!=t.project.type?i("div",{staticClass:"row mb-3"},[i("div",{staticClass:"col-12 col-sm-4"},[i("card",{staticClass:"data-box"},[i("div",[i("img",{attrs:{src:"/img/ico-money-rise.svg"}})]),t._v(" "),i("div",[t._v(t._s(t.project.total))])])],1),t._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("card",{staticClass:"data-box"},[i("div",[i("img",{attrs:{src:"/img/ico-pricehour.svg"}})]),t._v(" "),i("div",[t._v(t._s(t.project.price_hour))])])],1),t._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("card",{staticClass:"data-box"},[i("div",[i("img",{attrs:{src:"/img/ico-timer-big.svg"}})]),t._v(" "),i("div",[t._v(t._s(t.project.hours))])])],1)]):t._e(),t._v(" "),i("ProjectTasks",{attrs:{id:t.project.id}}),t._v(" "),0==t.project.archived?i("BIconFolderPlus",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"archive-icon pointer pull-right",attrs:{title:t.$t("archive_project")},on:{click:function(e){return t.toggleArchive()}}}):i("BIconFolderMinus",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"archive-icon pointer pull-right",attrs:{title:t.$t("unarchive_project")},on:{click:function(e){return t.toggleArchive()}}})],1):i("div",[i("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])])}),[],!1,null,null,null);e.default=o.exports},75:function(t,e,i){"use strict";var s=i(26);i.n(s).a},76:function(t,e,i){(t.exports=i(8)(!1)).push([t.i,".img-preview {\n  height: 100px;\n  width: auto;\n}",""])},79:function(t,e,i){"use strict";var s=i(28);i.n(s).a},80:function(t,e,i){(t.exports=i(8)(!1)).push([t.i,".new-task {\n  opacity: 0;\n  height: 0px;\n  margin-top: 0;\n  padding-top: 0;\n  transition: 0.3s;\n}\n.new-task.newTaskOpened {\n  opacity: 1;\n  height: inherit;\n  margin-bottom: 1em;\n}",""])},89:function(t,e,i){"use strict";var s=i(31);i.n(s).a},90:function(t,e,i){(t.exports=i(8)(!1)).push([t.i,"",""])}}]);
