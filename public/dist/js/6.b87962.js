(window.webpackJsonp=window.webpackJsonp||[]).push([[6,10,24],{20:function(e,t,i){"use strict";i.r(t);var s={middleware:"auth",props:["file"],data:function(){return{item:[],sureDelete:!1,deleted:!1,counter:0}},mounted:function(){this.item=this.$props.file},methods:{isImage:function(){return!1},getIcon:function(){return"image/jpeg"==this.item.mime_type?"file-image":"application/pdf"==this.item.mime_type?"file-pdf":"file"},sureYouWannaDelete:function(){var e=this;this.sureDelete=!0,this.counter=2,setTimeout((function(){return e.counter=1}),1e3),setTimeout((function(){return e.sureDelete=!1}),2e3)},deleteFile:function(){var e=this,t=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},"id",this.item.id);axios.post("/api/upload/file/delete",t).then((function(t){e.deleted=!0,e.sureDelete=!1,e.counter=0})).catch((function(t){e.deleted=!1,e.errors=t.response.data.errors||{},$.each(e.errors,(function(e,t){}))}))}}},l=(i(75),i(1)),o=Object(l.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.deleted?e._e():i("div",{staticClass:"slot-preview-file"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-10"},[i("a",{attrs:{href:"/api/upload/file/get/"+e.item.pivot.mediable_id+"/"+e.item.id,target:"_blank"}},[e.isImage()?i("span",[i("img",{staticClass:"img-responsive img-preview mb-2",attrs:{src:"/api/upload/file/show/"+e.item.pivot.mediable_id+"/"+e.item.id}})]):i("span",[e._v("\n          "+e._s(e.item.filename)+"."+e._s(e.item.extension)+"\n        ")])])]),e._v(" "),i("div",{staticClass:"col-2 text-right"},[e.sureDelete?e._e():i("span",{staticClass:"text-gray-200 pointer",on:{click:function(t){return e.sureYouWannaDelete()}}},[i("BIconTrash")],1),e._v(" "),e.sureDelete?i("button",{staticClass:"btn btn-sm bg-danger text-white",on:{click:function(t){return e.deleteFile()}}},[i("BIconTrash"),e._v("?\n        "+e._s(this.counter)+"\n      ")],1):e._e()])])])}),[],!1,null,null,null);t.default=o.exports},21:function(e,t,i){"use strict";i.r(t);var s={props:["model","id"],data:function(){return{fileRecords:[],uploadUrl:"/api/upload/files/"+this.$props.id,uploadHeaders:{"X-Test-Header":"vue-file-agent"},fileRecordsForUpload:[]}},methods:{uploadFiles:function(){this.$refs.vueFileAgent.upload(this.uploadUrl,this.uploadHeaders,this.fileRecordsForUpload),this.fileRecordsForUpload=[]},deleteUploadedFile:function(e){this.$refs.vueFileAgent.deleteUpload(this.uploadUrl,this.uploadHeaders,e)},filesSelected:function(e){var t=e.filter((function(e){return!e.error}));this.fileRecordsForUpload=this.fileRecordsForUpload.concat(t)},onBeforeDelete:function(e){var t=this.fileRecordsForUpload.indexOf(e);-1!==t?this.fileRecordsForUpload.splice(t,1):confirm("Are you sure you want to delete?")&&this.$refs.vueFileAgent.deleteFileRecord(e)},fileDeleted:function(e){var t=this.fileRecordsForUpload.indexOf(e);-1!==t?this.fileRecordsForUpload.splice(t,1):this.deleteUploadedFile(e)}}},l=i(1),o=Object(l.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("VueFileAgent",{ref:"vueFileAgent",attrs:{theme:"list",multiple:!0,deletable:!0,meta:!0,maxSize:"10MB",maxFiles:14,helpText:e.$t("choose_files"),errorText:{type:"Invalid file type. Only images or zip Allowed",size:"Files should not exceed 10MB in size"}},on:{select:function(t){return e.filesSelected(t)},beforedelete:function(t){return e.onBeforeDelete(t)},delete:function(t){return e.fileDeleted(t)}},model:{value:e.fileRecords,callback:function(t){e.fileRecords=t},expression:"fileRecords"}}),e._v(" "),i("button",{attrs:{disabled:!e.fileRecordsForUpload.length},on:{click:function(t){return e.uploadFiles()}}},[e._v("\n       "+e._s(e.$t("upload"))+"  "+e._s(e.fileRecordsForUpload.length)+" "+e._s(e.$t("files"))+"\n    ")])],1)}),[],!1,null,null,null);t.default=o.exports},22:function(e,t,i){"use strict";i.r(t);var s=i(62),l=i(21),o=i(20),n={middleware:"auth",components:{VueEditor:s.a,Uploader:l.default,TaskFileSlot:o.default},props:["id"],data:function(){return{loaded:!1,loadId:null,item:Array,customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"]]}},mounted:function(){this.loadId=this.$props.id;var e=this;axios.all([axios.get("/api/tasks/"+e.id)]).then(axios.spread((function(t){e.loaded=!0,e.item=t.data.data})))},methods:{updateTask:function(){var e=this;axios.patch(["/api/tasks/"+this.item.id],this.item).then((function(e){})).catch((function(t){422===t.response.status&&(e.errors=t.response.data.errors||{},$.each(e.errors,(function(e,t){})))}))}}},r=i(1),a=Object(r.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loaded?i("div",{staticClass:"p-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-9"},[i("b-form-input",{staticClass:"inline-input mb-3 text-lg",attrs:{size:"lg",required:""},on:{change:function(t){return e.updateTask()}},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-3"})]),e._v(" "),i("div",{staticClass:"row mb-4"},[i("div",{staticClass:"col-12"},[i("vue-editor",{staticClass:"inline-input",attrs:{id:"editor",editorToolbar:e.customToolbar},on:{blur:function(t){return e.updateTask()}},model:{value:e.item.desc,callback:function(t){e.$set(e.item,"desc",t)},expression:"item.desc"}})],1)]),e._v(" "),e._l(e.item.uploads,(function(e,t){return i("div",{key:parseInt(t),staticClass:"mb-3",attrs:{index:parseInt(t),value:e}},[i("TaskFileSlot",{attrs:{file:e}})],1)})),e._v(" "),i("div",{staticClass:"row mb-4"},[i("div",{staticClass:"col-12"},[i("Uploader",{attrs:{model:"task",id:e.item.id}})],1)])],2):i("div",[i("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])])}),[],!1,null,null,null);t.default=a.exports},26:function(e,t,i){var s=i(76);"string"==typeof s&&(s=[[e.i,s,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};i(9)(s,l);s.locals&&(e.exports=s.locals)},75:function(e,t,i){"use strict";var s=i(26);i.n(s).a},76:function(e,t,i){(e.exports=i(8)(!1)).push([e.i,".img-preview {\n  height: 100px;\n  width: auto;\n}",""])}}]);
